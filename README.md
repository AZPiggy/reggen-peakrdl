# reggen-peakrdl

## Register RTL Generator using Python + PeakRDL

This project provides a lightweight, Excel-driven workflow to generate SystemRDL and Verilog/SystemVerilog register RTL code. It supports various special behaviors (e.g., write-1-to-clear, write-to-reset) and leverages PeakRDL for code generation.

### Requirements

\- Python 3.8+

\- pip

\- PeakRDL core

\- PeakRDL plugins (peakrdl-regblock (for Verilog/SystemVerilog output))

You can install all required packages using:

```
pip install peakrdl peakrdl-regblock pandas openpyxl
```

### Folder Structure

reggen/

├── input.xlsx         # Input register spec in Excel format

├── rdl\_generator.py  # Python script to generate SystemRDL and call PeakRDL

├── output/

│   ├── regs.rdl       # Auto-generated SystemRDL file

│   └── rtl/           # Output Verilog/SystemVerilog files from PeakRDL

└── README.md

### Excel Input Format

The input Excel file input.xlsx should include the following columns (See examples for each in input.xlsx):

`` RegName	 Offset	  FieldName	  BitRange   Reset   BehaviorType ``

**Supported BehaviorType values:**

\- normal: basic RW field

\- write1\_to\_clear: write-1 to clear (we-type)

\- write\_to\_reset: write to clear all (woclr-type)

### How to Run

\- Prepare your input file (register specs)

\- Fill out the input.xlsx with your desired register and field definitions

**Run the generator script**

```
python rdl\_generator.py
```

**This script will:**

\- Parse input.xlsx

\- Generate output/regs.rdl

\- Automatically call "peakrdl regblock" to generate RTL in output/rtl/

### Check your output

\- After successful execution, you will find:

&nbsp;	output/regs.rdl — Auto-generated SystemRDL code

&nbsp;	output/rtl/ — Verilog/SystemVerilog files generated by PeakRDL

&nbsp;	Example files in output/rtl/ may include: top\_\_pkg.sv

### Troubleshooting

\- Make sure peakrdl and peakrdl-regblock are installed and accessible from your Python environment.

\- If peakrdl is not recognized in terminal, try running with full path:

```
python -m peakrdl ...
```

\- Bit range must be valid: for single-bit fields use \[0], for multi-bit use \[3:0].

### Notes

This is an extensible tool — you can easily add support for more BehaviorType variants or integrate it into a full SoC build flow.

The register model follows SystemRDL 2.0 conventions and can be further customized using PeakRDL plugins (e.g., uvm, html, ip-xact).




